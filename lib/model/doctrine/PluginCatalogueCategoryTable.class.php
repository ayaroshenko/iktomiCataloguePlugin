<?php

/**
 * PluginCatalogueCategoryTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PluginCatalogueCategoryTable extends Doctrine_Table
{
  /**
   * Returns an instance of this class.
   *
   * @return object PluginCatalogueCategoryTable
   */
  public static function getInstance()
  {
    return Doctrine_Core::getTable('PluginCatalogueCategory');
  }

  public function getFullTree()
  {
    /** @var Doctrine_Tree $treeObject  */
    $treeObject = $this->getTree();
    $rootColumnName = $treeObject->getAttribute('rootColumnName');

    $rootIds = array( );
    $roots = $treeObject->fetchRoots();
    foreach ($roots as $root)
    {
      $rootIds[] = $root->$rootColumnName;
    }
    $tree = $treeObject->fetchTree(array( 'root_id' => $rootIds ));

    return $tree->toHierarchy();
  }
}